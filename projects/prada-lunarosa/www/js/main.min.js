$(function(){function e(){console.log("showTimeline"),TweenMax.to(l,.5,{left:"8%",delay:.25,opacity:1,ease:Circ.easeInOut})}function o(){TweenMax.to(l,.5,{left:-500,opacity:0,ease:Circ.easeInOut})}function t(){TweenMax.to(c,.5,{opacity:0,top:-50,ease:Circ.easeOut})}function a(){TweenMax.to(c,.5,{opacity:1,top:0,ease:Circ.easeOut})}function n(e){switch(console.log("setTimeline: "+e),TweenMax.killTweensOf($(".dot")),TweenMax.killTweensOf(r),TweenMax.killTweensOf(g),e){case"morning":TweenMax.to(s,.5,{height:"33%",delay:.85,ease:Circ.easeOut}),TweenMax.to(r,.25,{opacity:1,left:"25%",delay:1.5,ease:Circ.easeOut}),TweenMax.to(g,.25,{opacity:0,left:"0%",ease:Circ.easeOut}),$(".dot.one").addClass("set"),$(".dot.three").removeClass("set"),TweenMax.set(".dot.two",{className:"+=active",delay:1.25}),TweenMax.set(".dot.three",{className:"-=active"}),TweenMax.set(".dot.four",{className:"-=active"});break;case"afternoon":TweenMax.to(s,.5,{height:"66%",delay:.85,ease:Circ.easeOut}),TweenMax.to(r,.25,{opacity:0,left:"0%",ease:Circ.easeOut}),TweenMax.to(g,.25,{opacity:1,left:"25%",delay:1.5,ease:Circ.easeOut}),$(".dot.two").addClass("set"),$(".dot.two").removeClass("active"),TweenMax.set(".dot.three",{className:"+=active",delay:1.25}),TweenMax.set(".dot.four",{className:"-=active"});break;case"night":TweenMax.to(s,.5,{height:"99%",delay:.85,ease:Circ.easeOut}),TweenMax.to(r,.25,{opacity:0,left:"0%",ease:Circ.easeOut}),$(".dot.three").addClass("set"),$(".dot.two").removeClass("active"),TweenMax.set(".dot.three",{className:"-=active"}),TweenMax.set(".dot.four",{className:"+=active",delay:1.25})}}console.log("luna rosa ready");var i=$(".bg-img"),l=$(".timeline"),c=$(".panel.intro"),s=$(".line-active"),r=$(".tag-morning"),g=$(".tag-afternoon"),d=new ScrollMagic.Controller;d=new ScrollMagic.Controller({addIndicators:!0}),new ScrollMagic.Scene({triggerElement:".panel.morning",duration:"100%"}).offset(-250).triggerHook("onLeave").addTo(d).on("enter",function(o){var a=o.target.controller().info("scrollDirection");TweenMax.to(i,.5,{opacity:.5,ease:Circ.easeOut}),"FORWARD"===a&&(e(),t()),n("morning"),console.log(a+" ENTER MORNING")}).on("leave",function(e){"REVERSE"===e.target.controller().info("scrollDirection")&&(console.log("LEAVE MORNING"),o(),a()),TweenMax.to(i,.5,{opacity:1,ease:Circ.easeOut})}),new ScrollMagic.Scene({triggerElement:".panel.afternoon",duration:"100%"}).offset(-250).triggerHook("onLeave").addTo(d).on("enter",function(){console.log("ENTER AFTERNOON"),TweenMax.to(i,.5,{opacity:.75}),n("afternoon")}).on("leave",function(e){console.log("LEAVE AFTERNOON")}),new ScrollMagic.Scene({triggerElement:".panel.night",duration:"100%"}).offset(-250).triggerHook("onLeave").addTo(d).on("enter",function(o){var t=o.target.controller().info("scrollDirection");console.log(t+" ENTER NIGHT"),n("night"),TweenMax.to(i,.5,{opacity:.9}),"REVERSE"===t&&e()}).on("leave",function(e){console.log("LEAVE NIGHT")}),new ScrollMagic.Scene({triggerElement:".panel.endframe",duration:"100%"}).offset(-250).triggerHook("onLeave").addTo(d).on("enter",function(){console.log("ENTER ENDFRAME"),TweenMax.to(i,.5,{opacity:1}),o()}).on("leave",function(e){console.log("LEAVE ENDFRAME")})});